## Step6. 後処理

PATHに隣接するEMPTYセルに対して、以下の条件を満たすときにPATHにする。

- 元々隣接していたPATH以外で、隣接するPATHが存在しない

アルゴリズムの流れ

- PATHに隣接しているEMPTYセルをキューに入れる
- キューをシャッフルする
- キューから1つのEMPTYセルを抽出し、上の条件を満たすならばEMPTYセルをPATHに変える
    - この際に、変更したセルに隣接している未確認のEMPTYセルをキューに入れる
- キューがなくなるまで実施する


完成系

```
##***.*.T.*T****.***
***.*.***.***.T*.*##
T#*.*.*.**.*.***.***
***.*.*.T*.*.*...*##
##*T*.*..*.*.*.*****
***.*T*..*.*.*...*##
##*.*.**.*T*.*.*****
***.*..*.*.*.*...*##
##*.**T*T*.*.*.***T.
***.T*.*.*.*.**T.*T.
#T*.T*.*.*.*.T**.*.T
***.**.*T*.***.*.***
##*.*..*.*...*.*.*##
***.*TT*.***.*.*****
##*.*.**#*.*.*..*T##
***.*.***#**.*.*****
##*.*.*#X#T*.*.*.*##
***.*.*.#***T*...*T#
##*.*.*####***.*****
***.*****#.T*TTT.*##
```

- 次に、Xからマンハッタン距離が2のEMPTYセルに対して以下の処理を実施する

- 対象のEMPTYセルの座標を[x,y]とする。下記の3点の組が全てPATHセルであるものが存在しているなら、このEMPTYセルをPATHセルに変える
    - ([x+1,y], [x+1,y+1],[x,y+1])
    - ([x+1,y], [x+1,y-1],[x,y-1])
    - ([x-1,y], [x-1,y+1],[x,y+1])
    - ([x-1,y], [x-1,y-1],[x,y-1])

- 具体例

初期状態

```
.****.
....**
..##.*
.#.X#.
...#..
......
```

- [2,4]はXからのマンハッタン距離は2であり、[1,4],[1,5],[2,5]が全てPATHなので、[2,4]をPATHに変える
- [1,3]はXからのマンハッタン距離は2であり、[0,3],[0,4],[1,4]が全てPATHなので、[0,3]をPATHに変える

```
.****.
...***
..##**
.#.X#.
...#..
......
```


- 最後に、残っているすべてのEMPTYセルをNEW_TREEに変える